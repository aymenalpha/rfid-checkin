<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>RFID Visitor Check-in</title>
</head>
<body>
    <h2>Welcome! Please scan your RFID card.</h2>
    
    <label for="rfid">RFID Code:</label>
    <input type="text" id="rfid" autofocus>

    <br><br>

    <button onclick="register()">Register</button>
    <button onclick="checkIn()">I Have Already Been Approved</button>

    <h3 id="message" style="color: green;"></h3> <!-- Feedback message -->

    <script>
        document.getElementById("rfid").addEventListener("keypress", function(event) {
            if (event.key === "Enter") {
                event.preventDefault(); // Prevents unwanted form submission
                let rfid = document.getElementById("rfid").value.trim();
                if (rfid) {
                    processRFID(rfid);
                }
            }
        });

        function processRFID(rfid) {
            document.getElementById("rfid").value = ""; // Clear the input field for the next scan
            document.getElementById("message").innerText = "Processing RFID: " + rfid; // Show scanned RFID

            fetch(`https://your-firebase-api.com/check?rfid=${rfid}`)
                .then(response => response.json())
                .then(data => {
                    if (data.exists) {
                        document.getElementById("message").innerText = `${data.name} is here to see ${data.reason}`;
                        sendEmail(data.name, data.reason);
                    } else {
                        let name = prompt("Enter your name:");
                        let reason = prompt("Who are you here to see?");
                        if (name && reason) {
                            registerVisitor(rfid, name, reason);
                        }
                    }
                })
                .catch(error => {
                    document.getElementById("message").innerText = "Error processing RFID.";
                    console.error(error);
                });
        }

        function registerVisitor(rfid, name, reason) {
            fetch("https://your-firebase-api.com/register", {
                method: "POST",
                headers: { "Content-Type": "application/json" },
                body: JSON.stringify({ rfid, name, reason })
            }).then(() => {
                document.getElementById("message").innerText = `Welcome, ${name}! You are now registered.`;
            });
        }

        function sendEmail(name, reason) {
            fetch("https://your-email-api.com/send", {
                method: "POST",
                headers: { "Content-Type": "application/json" },
                body: JSON.stringify({ name, reason })
            });
            document.getElementById("message").innerText = `Check-in successful for ${name}. Printing badge...`;
        }
    </script>
</body>
</html>

</body>
</html>
``
